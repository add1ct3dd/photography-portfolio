!function(e){var o,a=e(window),t=e("body");e("#wrapper");(breakpoints({xlarge:["1281px","1680px"],large:["981px","1280px"],medium:["737px","980px"],small:["481px","736px"],xsmall:[null,"480px"]}),"ie"==browser.name&&t.addClass("ie"),browser.mobile&&t.addClass("touch"),browser.canUse("transition"))&&(a.on("load",function(){window.setTimeout(function(){t.removeClass("is-preload")},100)}),a.on("resize",function(){window.clearTimeout(o),t.addClass("is-resizing"),o=window.setTimeout(function(){t.removeClass("is-resizing")},100)}));a.scrollTop(0);var n=e(".panel");n.each(function(){var o=e(this),a=e('[href="#'+o.attr("id")+'"]');e('<div class="closer" />').appendTo(o).on("click",function(e){o.trigger("---hide")}),o.on("click",function(e){e.stopPropagation()}).on("---toggle",function(){o.hasClass("active")?o.triggerHandler("---hide"):o.triggerHandler("---show")}).on("---show",function(){t.hasClass("content-active")&&n.trigger("---hide"),o.addClass("active"),a.addClass("active"),t.addClass("content-active")}).on("---hide",function(){o.removeClass("active"),a.removeClass("active"),t.removeClass("content-active")}),a.removeAttr("href").css("cursor","pointer").on("click",function(e){e.preventDefault(),e.stopPropagation(),o.trigger("---toggle")})}),t.on("click",function(e){t.hasClass("content-active")&&(e.preventDefault(),e.stopPropagation(),n.trigger("---hide"))}),a.on("keyup",function(e){27==e.keyCode&&t.hasClass("content-active")&&(e.preventDefault(),e.stopPropagation(),n.trigger("---hide"))}),e("#header").find("a").each(function(){var o=e(this),a=o.attr("href");a&&"#"!=a.charAt(0)&&o.removeAttr("href").css("cursor","pointer").on("click",function(e){e.preventDefault(),e.stopPropagation(),window.location.href=a})}),e("#footer").find(".copyright").each(function(){var o=e(this),a=o.parent(),t=a.parent().children().last();breakpoints.on("<=medium",function(){o.appendTo(t)}),breakpoints.on(">medium",function(){o.appendTo(a)})});var i=e("#main"),r={};function s(o){var a=e("#main").data("exif"),t="";for(var n in a){var i=a[n],r=EXIF.getTag(o,i.tag);void 0!==r&&(t+='<span title="'+i.tag.split(/(?=[A-Z])/).join(" ")+": "+r+'"><i class="fa fa-'+i.icon+'" aria-hidden="true"></i> '+r+"</span>&nbsp;&nbsp;","LensModel"===i.tag&&(t+="</br>"))}return t+='<a target="_blank" style="float:right;" href="https://flickr.com/photos/matthew-evans/'+o.src.split("_")[0].split("/images/thumbs/")[1]+'/"><i class="fab fa-flickr"></i> View on Flickr</a>'}i.children(".thumb").each(function(){var o,a=e(this).find(".image"),t=a.children("img");0!=a.length&&(a.css("background-image","url("+t.attr("src")+")"),(o=t.data("position"))&&a.css("background-position",o),t.hide(),t[0].addEventListener("load",function(){EXIF.getData(t[0],function(){r[t.data("name")]=s(this)})}))}),i.poptrox({baseZIndex:2e4,caption:function(e){var o=e.children("img"),a=r[o.data("name")];return void 0===a&&EXIF.getData(o[0],function(){a=r[o.data("name")]=s(this)}),void 0!==a?"<p>"+a+"</p>":" "},fadeSpeed:300,onPopupClose:function(){t.removeClass("modal-active")},onPopupOpen:function(){t.addClass("modal-active")},overlayOpacity:0,popupCloserText:"",popupHeight:150,popupLoaderText:"",popupSpeed:300,popupWidth:150,selector:".thumb > a.image",usePopupCaption:!0,usePopupCloser:!0,usePopupDefaultStyling:!1,usePopupForceClose:!0,usePopupLoader:!0,usePopupNav:!0,windowMargin:50}),breakpoints.on("<=xsmall",function(){i[0]._poptrox.windowMargin=0}),breakpoints.on(">xsmall",function(){i[0]._poptrox.windowMargin=50})}(jQuery);